socket은 통신을 위한 종착지 역할을 한다.
각 컴퓨터는 socket을 이용해 data를 교환한다.
TCP, UDP 두 방식이 있다.

TCP는 연결형. 느리지만 신뢰도 높음. 여러개의 패킷으로 나눠 송수신한다.
UDP는 비연결형. TCP에 비해 빠르고 신뢰성은 부족. 사전 통신 절차 ㄴㄴ

////////////////////////////////////////////////////////
TCP/IP 4layers

응용					응용
---------소켓----------------
전송					전송
인터넷					인터넷
물리	 	인터넷		물리

///////////////////////////////////////////////////////
서버&클라이언트 구조 : 가장 대표적인 네트워크 구성 모델.
모든 데이터의 관리와 처리가 서버에 집중된다.

//////////////////////////////////////////////////////
일반적인 소켓 프로그래밍

socket()					socket()
bind()
listen()
accept()					connect()
send(), recv()	--internet-- send(), recv()
closesocket()				closesocket()

///////////////////////////////////////////////
port
특정 프로그램이 통신을 하기 위해 포트 번호를 할당해야한다. 포트번호는 16비트이다.
1-1024는 시스템 포트이므로,,,  포트번호를 1025번 이상으로 선택해 미리 설정해야한다.

서버 프로그램의 포트번호는 명시적으로 할당해야한다. 클라이언트 프로그램이 서버의 ip주소와 포트번호를 알아야 접속이 가능하기 때문.

서버-클라이언트 연결 수립시 클라이언트 컴퓨터에서는 미사용인 임의 포트가 할당된다.

*/

/*
*************************
socket(주소체계, 소켓타입, 프로토콜)
생성 실패시 -1반환
주소체계 : AF_INET, AF_INET6
소켓 타입 : SOCK_STREAM, SOCK_DGRAM
프로토콜 : IPPROPTO_TCP, IPPROTO_UDP


*************************
bind(소켓 변수, 서버 주소 구조체, 서버 주소 구조체의 크기)
서버 측의 소켓에 IP와 포트 번호를 할당하여 네트워크 인터페이스와 묶일 수 있도록 합니다.

IPv4 소켓 주소 구조체(SOCKADDR_IN): 소켓 주소체계(sin_family), 포트(sin_port), IPv4 주소(sin_addr)
실제로 소켓 주소 구조체를 이용할 때는 IPv4 소켓 주소 구조체를 일반 소켓 구조체(SOCKADDR)로 변환하여 사
용해야 합니다.

*************************
listen(소켓 변수, 백 로그 큐의 크기)
클라이언트로부터 연결 요청을 기다립니다.
백 로그란 동시에 연결을 시도하는 최대 클라이언트 수를 의미합니다.

*************************
서버쪽 함수 : 서버는 서버 소켓, 클라이언트 소켓을 모두 가지고 있어야 통신 가능
accpet(소켓 변수, 클라이언트 주소 구조체 변수, 클라이언트 주소 구조체 크기)
서버 측에서 클라이언트의 연결을 수락합니다.
accpet() 함수 내부에서 클라이언트 주소를 설정한 뒤에 통신에 사
용할 클라이언트의 소켓을 반환합니다. 오류가 발생하는 경우 -1을 반환합니다.
실제로 소켓 주소 구조체를 이용할 때는 IPv4 소켓 주소 구조체를 일반 소켓 구조체(SOCKADDR)로 변환하여 사용해야 합니다.


*************************
클라이언트쪽 함수
connect(소켓 변수, 서버 주소 구조체, 서버 주소 구조체 크기)
클라이언트 측에서 서버에 연결을 요청합니다. 소켓 생성에 실패하는 경우 -1을 반환합니다.
- IPv4 소켓 주소 구조체: 소켓 주소체계(sin_family), 포트 번호(sin_port), IPv4 주소(sin_addr)
실제로 소켓 주소 구조체를 이용할 때는 IPv4 소켓 주소 구조체를 일반 소켓 구조체(SOCKADDR)로 변환하여 사용해야 합니다.


*************************
send(소켓 변수, 문자열 버퍼, 문자열 버퍼 크기, 플래그)

상대방에게 데이터를 보냅니다. 특정한 소켓으로 문자열 버퍼에 담긴 내용을 전송합니다. 플래그는 특별한 경우가아니라면 0을 설정합니다. 데이터 전송에 실패하는 경우 -1을 반환합니다.

**************************
recv(소켓 변수, 문자열 버퍼, 문자열 버퍼 크기, 플래그)

데이터를 수신하여 특정 문자열 버퍼에 담습니다. 플래그는 특별한 경우가 아니라면 0을 설정합니다. 데이터 수신에 실패하는 경우 -1을 반환합니다.

**************************
closesocket(소켓 변수)

열린 소켓을 닫습니다.




*************************
Winsock2

Windows Socket API의 준말로 네트워크 프로그래밍을 위한 라이브러리입니다. Winsock을 사용하기 위해서는
ws2_32.dll 파일을 사용 설정해야 하며 WSAStartup() 함수 등을 통해 환경 설정을 진행해야 합니다.

Winsock2는 윈도우를 위한 소켓 프로그래밍 라이브러리이므로 리눅스 프로그램에서는 사용할 필요가 없습니다.
본 강의에서는 윈도우 운영체제를 사용하는 개발자를 위해 Winsock2를 적용합니다.

***********

WSAStartup(윈속 버전, WSA 데이터 변수)
사용할 Winsock의 버전을 설정합니다. 관련 설정 정보를 받기 위해 WSADATA 변수를 함께 넣어줍니다.

**********
WSACleanup()
Winsock을 더 이상 사용하지 않음을 설정합니다.


****************
Winsock2 사용시

WSAStartup()				WSAStartup()
socket()					socket()
bind()
listen()
accept()		-internet-	connect()
send(), recv()	-internet-  send(), recv()
closesocket()				closesocket()
WSACleanup()				WSACleanup()
